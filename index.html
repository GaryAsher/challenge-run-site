---
layout: default
title: Home
---

<div class="page-width">

<h1>Challenge Run Community</h1>

<p class="muted mb-6">
  A space built around creative challenge runs, clear rules, and respect for all challenge styles.
</p>

<div class="home-grid">
  <!-- News Section - Square carousel -->
  <div class="home-main">
    <div class="home-card home-card--square">
      <h2 class="home-card__title">ğŸ“° News</h2>
      <div class="home-card__content">
        <div class="news-carousel" id="news-carousel">
          {% assign featured_posts = site.posts | where: "featured", true %}
          {% assign posts_to_show = featured_posts %}
          {% if posts_to_show.size == 0 %}
            {% assign posts_to_show = site.posts %}
          {% endif %}
          
          {% if posts_to_show.size > 0 %}
            {% for post in posts_to_show limit:5 %}
              <div class="news-slide{% if forloop.first %} is-active{% endif %}" data-index="{{ forloop.index0 }}">
                <span class="news-slide__date muted">{{ post.date | date: "%b %d, %Y" }}</span>
                <h3 class="news-slide__title">
                  <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                </h3>
                {% if post.excerpt %}
                  <p class="news-slide__excerpt muted">{{ post.excerpt | strip_html | truncate: 120 }}</p>
                {% endif %}
              </div>
            {% endfor %}
            
            <!-- Carousel controls -->
            <div class="news-carousel__controls">
              <div class="news-carousel__dots" id="carousel-dots">
                {% for post in posts_to_show limit:5 %}
                  <button type="button" class="news-carousel__dot{% if forloop.first %} is-active{% endif %}" data-index="{{ forloop.index0 }}" aria-label="Go to slide {{ forloop.index }}"></button>
                {% endfor %}
              </div>
            </div>
            
            <p class="news-carousel__link mt-3">
              <a href="{{ '/news/' | relative_url }}" class="muted">View all news â†’</a>
            </p>
          {% else %}
            <div class="news-slide is-active">
              <span class="news-slide__date muted">Coming Soon</span>
              <p class="news-slide__excerpt">News and updates will appear here.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- Community Board Section -->
  <div class="home-sidebar">
    <div class="home-card home-card--full-height">
      <h2 class="home-card__title">ğŸ“‹ Community Board</h2>
      <div class="community-board">
        <p class="muted" style="margin-bottom: 1rem; font-size: 0.9rem;">Bounties, requests, and community highlights</p>
        
        <div class="board-list" id="board-list">
          <div class="board-item board-item--placeholder">
            <span class="board-item__type muted">Bounty</span>
            <p class="board-item__text">No active bounties yet. Check back soon!</p>
          </div>
          <div class="board-item board-item--placeholder">
            <span class="board-item__type muted">Request</span>
            <p class="board-item__text">Want to post a bounty or request? Contact us!</p>
          </div>
        </div>

        <div class="board-pagination" id="board-pagination" style="display: none;">
          <button class="btn btn--sm" id="board-prev" disabled>â† Prev</button>
          <span class="muted board-page-info">Page <span id="board-page">1</span></span>
          <button class="btn btn--sm" id="board-next" disabled>Next â†’</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Quick Links -->
<div class="resource-cards" style="margin-top: 1.5rem;">
  <a href="{{ '/games/' | relative_url }}" class="resource-card card-lift--sm">
    <div class="resource-card__icon">ğŸ®</div>
    <div class="resource-card__content">
      <h2 class="resource-card__title">Games</h2>
      <p class="resource-card__desc">Browse all tracked games</p>
      <span class="resource-card__count">{{ site.games.size }} {% if site.games.size == 1 %}game{% else %}games{% endif %}</span>
    </div>
  </a>

  <a href="{{ '/runners/' | relative_url }}" class="resource-card card-lift--sm">
    <div class="resource-card__icon">ğŸ†</div>
    <div class="resource-card__content">
      <h2 class="resource-card__title">Runners</h2>
      <p class="resource-card__desc">View runner profiles and runs</p>
      <span class="resource-card__count">{{ site.runners.size }} {% if site.runners.size == 1 %}runner{% else %}runners{% endif %}</span>
    </div>
  </a>

  <a href="{{ '/rules/' | relative_url }}" class="resource-card card-lift--sm">
    <div class="resource-card__icon">ğŸ“œ</div>
    <div class="resource-card__content">
      <h2 class="resource-card__title">Rules</h2>
      <p class="resource-card__desc">Site-wide guidelines and policies</p>
      <span class="resource-card__count">Learn more</span>
    </div>
  </a>

  <a href="{{ '/glossary/' | relative_url }}" class="resource-card card-lift--sm">
    <div class="resource-card__icon">ğŸ“–</div>
    <div class="resource-card__content">
      <h2 class="resource-card__title">Glossary</h2>
      <p class="resource-card__desc">Challenge run terminology</p>
      <span class="resource-card__count">Reference</span>
    </div>
  </a>
</div>

<!-- Featured Teams Section -->
<div class="featured-teams">
  <h2 class="featured-teams__title">ğŸ¤ Affiliated Teams</h2>
  {% if site.teams.size > 0 %}
    <div class="teams-grid">
      {% for team in site.teams limit:4 %}
        <a href="{{ team.url | relative_url }}" class="team-card card-lift--sm">
          {% if team.logo %}
            <img src="{{ team.logo | relative_url }}" alt="{{ team.name }}" class="team-card__logo">
          {% else %}
            <div class="team-card__logo team-card__logo--placeholder">{{ team.name | slice: 0 }}</div>
          {% endif %}
          <div class="team-card__name">{{ team.name }}</div>
        </a>
      {% endfor %}
    </div>
    {% if site.teams.size > 4 %}
      <p class="mt-3">
        <a href="{{ '/teams/' | relative_url }}" class="muted">View all teams â†’</a>
      </p>
    {% endif %}
  {% else %}
    <div class="teams-grid">
      <div class="team-card team-card--placeholder" style="border-style: dashed; opacity: 0.7;">
        <div class="team-card__logo">?</div>
        <div class="team-card__name">Teams coming soon</div>
      </div>
    </div>
  {% endif %}
  <p class="muted mt-3" style="font-size: 0.9rem;">
    Interested in partnering? <a href="{{ '/support/' | relative_url }}">Contact us!</a>
  </p>
</div>

</div>

<!-- News Carousel Script -->
<script>
(function() {
  var carousel = document.getElementById('news-carousel');
  if (!carousel) return;

  var slides = carousel.querySelectorAll('.news-slide');
  var dots = carousel.querySelectorAll('.news-carousel__dot');
  
  if (slides.length <= 1) return;

  var currentIndex = 0;
  var intervalId = null;
  var INTERVAL_MS = 5000; // 5 seconds per slide

  function showSlide(index) {
    // Wrap around
    if (index >= slides.length) index = 0;
    if (index < 0) index = slides.length - 1;

    currentIndex = index;

    // Update slides
    slides.forEach(function(slide, i) {
      slide.classList.toggle('is-active', i === index);
    });

    // Update dots
    dots.forEach(function(dot, i) {
      dot.classList.toggle('is-active', i === index);
    });
  }

  function nextSlide() {
    showSlide(currentIndex + 1);
  }

  function startAutoplay() {
    stopAutoplay();
    intervalId = setInterval(nextSlide, INTERVAL_MS);
  }

  function stopAutoplay() {
    if (intervalId) {
      clearInterval(intervalId);
      intervalId = null;
    }
  }

  // Dot click handlers
  dots.forEach(function(dot) {
    dot.addEventListener('click', function() {
      var index = parseInt(dot.dataset.index, 10);
      showSlide(index);
      // Restart autoplay after manual interaction
      startAutoplay();
    });
  });

  // Pause on hover
  carousel.addEventListener('mouseenter', stopAutoplay);
  carousel.addEventListener('mouseleave', startAutoplay);

  // Pause when page is hidden
  document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
      stopAutoplay();
    } else {
      startAutoplay();
    }
  });

  // Start autoplay
  startAutoplay();
})();
</script>
