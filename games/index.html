---
layout: default
title: Games
---

<h1>Games</h1>
<p class="muted">Jump by letter or filter by category.</p>

<!-- =========================================================
     Aâ€“Z navigation + all filter controls (constrained to page width)
     ========================================================= -->
<div class="page-width">

  <div class="az" id="az">
    <a href="#0-9">#</a>
    {% assign letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" | split: "" %}
    {% for L in letters %}
      <a href="#{{ L }}">{{ L }}</a>
    {% endfor %}
    <a href="#other">Other</a>
    <a href="#all" class="muted">All</a>
  </div>

  <div class="filter-wrap">
    <input id="q" class="filter" placeholder="Search within results..." autocomplete="off" />
  </div>

  <!-- Tags + Challenges row -->
  <div class="filters-grid">

    <!-- Tag filter -->
    <div class="tag-filter" id="tag-filter">
      <div class="muted" style="margin-bottom: 0.35rem;">Filter by tags:</div>
      <div class="tag-picker">
        <div class="tag-picked" id="tag-picked"></div>
        <div class="filter-wrap">
          <input
            id="tag-search"
            class="tag-search"
            type="text"
            placeholder="Type a tag..."
            autocomplete="off"
          />
        </div>
        <div class="tag-suggestions" id="tag-suggestions" hidden></div>
      </div>
    </div>

    <!-- Challenge filter -->
    <div class="tag-filter" id="challenge-filter">
      <div class="muted" style="margin-bottom: 0.35rem;">Filter by challenges:</div>
      <div class="tag-picker">
        <div class="tag-picked" id="challenge-picked"></div>
        <div class="filter-wrap">
          <input
            id="challenge-search"
            class="tag-search"
            type="text"
            placeholder="Type a challenge..."
            autocomplete="off"
          />
        </div>
        <div class="tag-suggestions" id="challenge-suggestions" hidden></div>
      </div>
    </div>

  </div>

  <div class="results-controls">
    <label class="muted" for="limit">Show:</label>
    <select id="limit" class="select">
      <option value="10" selected>10</option>
      <option value="25">25</option>
      <option value="50">50</option>
      <option value="100">100</option>
      <option value="250">250</option>
      <option value="0">All</option>
    </select>
  </div>

  <p class="muted" id="status"></p>

</div>

<!-- =========================================================
     Games grid (constrained to page width)
     ========================================================= -->
<div class="page-width">
  <div class="grid" id="game-list">
    {% assign sorted = site.games | sort: "name" %}
    {% for g in sorted %}
      <a
        class="game-card game-item"
        href="{{ g.url | relative_url }}"
        data-name="{{ g.name | downcase }}"
        data-tags="{{ g.tags | join: ',' | downcase }}"
        data-challenges="{{ g.challenges | default: empty | join: ',' | downcase }}"
      >
        {% assign game_cover = g.cover | default: "/assets/img/site/default-game.jpg" %}
        <div class="game-card__bg" style="background-image: url('{{ game_cover | relative_url }}');"></div>
        <div class="game-card__overlay">
          <div class="game-card__title">{{ g.name }}</div>
        </div>
      </a>
    {% endfor %}
  </div>
</div>

<script>
// =========================================================
// DOM: cache everything once for speed + clarity
// =========================================================  
const items = Array.from(document.querySelectorAll(".game-item"));
const input = document.getElementById("q");
const status = document.getElementById("status");
const limitSelect = document.getElementById("limit");

// =========================================================
// DOM: Tags filter elements + challenge filter elements
// =========================================================
const tagFilterEl = document.getElementById("tag-filter");
const tagPickedEl = document.getElementById("tag-picked");
const tagSearchEl = document.getElementById("tag-search");
const tagSugEl = document.getElementById("tag-suggestions");

const challengeFilterEl = document.getElementById("challenge-filter");
const challengePickedEl = document.getElementById("challenge-picked");
const challengeSearchEl = document.getElementById("challenge-search");
const challengeSugEl = document.getElementById("challenge-suggestions");

const activeTags = new Set();
const activeChallenges = new Set();

// =========================================================
// Data: load label maps from Jekyll data files
// =========================================================
const TAGS = [
{% for pair in site.data.tags %}
{ id: "{{ pair[0] }}", label: "{{ pair[1].label }}" }{% unless forloop.last %},{% endunless %}
{% endfor %}
].sort((a,b)=>a.label.localeCompare(b.label));

const CHALLENGES = [
{% for pair in site.data.challenges %}
{ id: "{{ pair[0] }}", label: "{{ pair[1].label }}" }{% unless forloop.last %},{% endunless %}
{% endfor %}
].sort((a,b)=>a.label.localeCompare(b.label));

// =========================================================
// Normalize user input + IDs so matching is consistent.
// =========================================================
const norm = s => (s || "").trim().toLowerCase();

// =========================================================
// UI: render selected chips (click chip = remove)
// =========================================================
function renderPicked(set, list, el, { onRemove } = {}) {
  el.innerHTML = "";

  for (const id of set) {
    const meta = list.find(x => norm(x.id) === id);
    const label = meta ? meta.label : id;

    const chip = document.createElement("button");
    chip.type = "button";
    chip.className = "tag-chip";
    chip.textContent = label;

    chip.addEventListener("click", () => {
      set.delete(id);
      if (onRemove) onRemove();
    });

    el.appendChild(chip);
  }

  el.classList.toggle("is-empty", set.size === 0);
}

// =========================================================
// UI: render dropdown suggestions (click suggestion = select)
// =========================================================
function renderSuggestions(query, set, list, sugEl, { onPick } = {}) {
  const q = norm(query);
  sugEl.innerHTML = "";

  const results = list
    .filter(x => {
      const id = norm(x.id);
      const label = norm(x.label);
      if (set.has(id)) return false;
      if (!q) return true;
      return id.includes(q) || label.includes(q);
    })
    .slice(0, 24);

  if (results.length === 0) {
    const empty = document.createElement("div");
    empty.className = "tag-suggestion is-empty";
    empty.textContent = "No matches.";
    sugEl.appendChild(empty);
    sugEl.hidden = false;
    return;
  }

  for (const x of results) {
    const btn = document.createElement("button");
    btn.type = "button";
    btn.className = "tag-suggestion";
    btn.textContent = x.label;

    btn.addEventListener("click", () => {
      set.add(norm(x.id));
      if (onPick) onPick();
      sugEl.hidden = true;
    });

    sugEl.appendChild(btn);
  }

  sugEl.hidden = false;
}

// =========================================================
// Filtering: search + tags + challenges
// =========================================================
function applyFilter() {
  const q = norm(input.value);
  const limit = Number(limitSelect.value);
  const matches = [];

  for (const el of items) {
    const name = el.dataset.name || "";
    const tags = (el.dataset.tags || "").split(",").map(norm).filter(Boolean);
    const challenges = (el.dataset.challenges || "").split(",").map(norm).filter(Boolean);

    const ok =
      (!q || name.includes(q)) &&
      Array.from(activeTags).every(t => tags.includes(t)) &&
      Array.from(activeChallenges).every(c => challenges.includes(c));

    if (ok) matches.push(el);
    el.style.display = "none";
  }

  const shown = limit === 0 ? matches.length : Math.min(limit, matches.length);
  for (let i = 0; i < shown; i++) matches[i].style.display = "";

  status.textContent = `${shown} shown of ${matches.length} matches`;
}

// =========================================================
// Dropdown behavior: open on focus/click, close on outside/Esc
// =========================================================
function wireDropdown({ filterEl, searchEl, sugEl, set, list, pickedEl }) {
  function open() {
    renderSuggestions(searchEl.value, set, list, sugEl, {
      onPick: () => {
        searchEl.value = "";
        renderPicked(set, list, pickedEl, { onRemove: onRemoveChip });
        applyFilter();
        searchEl.blur();
      }
    });
  }

  function close() {
    sugEl.hidden = true;
  }

  function onRemoveChip() {
    searchEl.value = "";
    renderPicked(set, list, pickedEl, { onRemove: onRemoveChip });
    applyFilter();
    close();
    searchEl.blur();
  }

  renderPicked(set, list, pickedEl, { onRemove: onRemoveChip });

  searchEl.addEventListener("focus", () => {
    if (sugEl.hidden) open();
  });

  searchEl.addEventListener("pointerdown", () => {
    if (sugEl.hidden) open();
    else close();
  });

  searchEl.addEventListener("input", () => open());

  searchEl.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      close();
      searchEl.blur();
    }
  });

  document.addEventListener(
    "pointerdown",
    (e) => {
      if (!filterEl.contains(e.target)) close();
    },
    true
  );
}

// =========================================================
// Init: wire both dropdowns and attach global filter events
// =========================================================
wireDropdown({
  filterEl: tagFilterEl,
  searchEl: tagSearchEl,
  sugEl: tagSugEl,
  set: activeTags,
  list: TAGS,
  pickedEl: tagPickedEl
});

wireDropdown({
  filterEl: challengeFilterEl,
  searchEl: challengeSearchEl,
  sugEl: challengeSugEl,
  set: activeChallenges,
  list: CHALLENGES,
  pickedEl: challengePickedEl
});
     
  window.addEventListener("hashchange", applyFilter);
  input.addEventListener("input", applyFilter);
  limitSelect.addEventListener("change", applyFilter);
     
// =========================================================
// UX: clicking outside the whole filter area removes focus (caret)
// =========================================================
const controlsRoot = document.querySelector(".page-width");

document.addEventListener("pointerdown", (e) => {
  if (controlsRoot && controlsRoot.contains(e.target)) return;

  input.blur();
  tagSearchEl.blur();
  challengeSearchEl.blur();
  limitSelect.blur();
});

applyFilter();
</script>
