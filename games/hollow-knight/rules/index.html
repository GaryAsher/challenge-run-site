---
layout: default
title: Hollow Knight Rules
game_id: hollow-knight
permalink: /games/hollow-knight/rules/
---

{% assign game = site.games | where: "game_id", page.game_id | first %}
{% include game-header-tabs.html game=game active="rules" %}

<div class="page-width">
  <div class="game-shell">
    <section class="tab-panel active">

      <h1>Rules & Definitions</h1>
      <p class="muted mb-4">Official rules, category definitions, and challenge guidelines for {{ game.name }}.</p>

      <!-- =========================================================
           Rule Builder - Pin/Combine Rules
           ========================================================= -->
      <div class="rule-builder card card--compact mb-4" id="rule-builder">
        <h2 class="mb-2">üìå Rule Builder</h2>
        <p class="muted mb-3">Select rules to combine and see your complete ruleset:</p>
        
        <div class="rule-builder__selections">
          <div class="rule-builder__group">
            <label class="rule-builder__label">Category</label>
            <select class="rule-builder__select" id="rb-category">
              <option value="">-- Select Category --</option>
              {% for cat in game.categories_data %}
                <option value="{{ cat.slug }}" data-rules="{{ cat.description | default: '' | escape }}">{{ cat.label }}</option>
                {% if cat.children %}
                  {% for child in cat.children %}
                    <option value="{{ cat.slug }}/{{ child.slug }}" data-rules="{{ child.description | default: '' | escape }}">  ‚Ü≥ {{ child.label }}</option>
                  {% endfor %}
                {% endif %}
              {% endfor %}
            </select>
          </div>

          <div class="rule-builder__group">
            <label class="rule-builder__label">Challenge Type</label>
            <select class="rule-builder__select" id="rb-challenge">
              <option value="">-- Select Challenge --</option>
              {% for ch_id in game.challenges %}
                {% assign ch_meta = site.data.challenges[ch_id] %}
                <option value="{{ ch_id }}" data-rules="{{ ch_meta.description | default: '' | escape }}">{{ ch_meta.label | default: ch_id }}</option>
              {% endfor %}
              {% for cc in game.community_challenges %}
                <option value="{{ cc.slug }}" data-rules="{{ cc.description | default: '' | escape }}">{{ cc.label }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="rule-builder__group">
            <label class="rule-builder__label">Glitch Rules</label>
            <select class="rule-builder__select" id="rb-glitch">
              <option value="">-- Select Glitch Category --</option>
              {% for glitch in game.glitches_data %}
                <option value="{{ glitch.slug }}" 
                        data-rules="{{ glitch.description | default: '' | escape }}"
                        data-allowed="{{ glitch.allowed | join: ', ' | escape }}"
                        data-banned="{{ glitch.banned | join: ', ' | escape }}">
                  {{ glitch.label }}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="rule-builder__group">
            <label class="rule-builder__label">Restrictions</label>
            <div class="rule-builder__checkboxes" id="rb-restrictions">
              {% for res in game.restrictions %}
                <label class="rule-builder__checkbox">
                  <input type="checkbox" value="{{ res }}" data-incompatible="">
                  <span>{{ res }}</span>
                </label>
              {% endfor %}
            </div>
          </div>
        </div>

        <div class="rule-builder__output" id="rb-output">
          <h3 class="mb-2">Combined Ruleset</h3>
          <div class="rule-builder__result" id="rb-result">
            <p class="muted">Select options above to build your ruleset.</p>
          </div>
        </div>

        <div class="rule-builder__validation" id="rb-validation" style="display: none;">
          <p class="rule-builder__warning">‚ö†Ô∏è <span id="rb-warning-text"></span></p>
        </div>
      </div>

      <!-- =========================================================
           General Rules (open by default)
           ========================================================= -->
      <div class="rules-section">
        <details class="accordion-item accordion-item--section" open>
          <summary class="accordion-header accordion-header--section">
            <span class="accordion-title">üìã General Rules</span>
            <span class="accordion-icon">‚ñº</span>
          </summary>
          <div class="accordion-content">
            <ul>
              <li><strong>Timing Method:</strong> {{ game.timing_method | default: "RTA (Real Time Attack)" }}</li>
              <li><strong>Video Required:</strong> All submissions must include video proof (YouTube, Twitch Highlight, or Bilibili)</li>
              <li><strong>Main Menu Required:</strong> Runs must show the main menu at the start to verify no mods or storage glitches</li>
              <li><strong>No Cheats/Mods:</strong> External tools, cheats, or gameplay-altering mods are not allowed</li>
              <li><strong>Pausing:</strong> Pausing is generally allowed unless otherwise specified</li>
            </ul>
          </div>
        </details>
      </div>

      <!-- =========================================================
           Run Categories
           ========================================================= -->
      {% if game.categories_data and game.categories_data.size > 0 %}
      <div class="rules-section mt-4">
        <details class="accordion-item accordion-item--section">
          <summary class="accordion-header accordion-header--section">
            <span class="accordion-title">üèÉ Run Categories</span>
            <span class="accordion-icon">‚ñº</span>
          </summary>
          <div class="accordion-content">
            <p class="muted mb-3">Speedrun categories available for {{ game.name }}:</p>
            <div class="accordion">
              {% for cat in game.categories_data %}
                <details class="accordion-item">
                  <summary class="accordion-header">
                    <span class="accordion-title">{{ cat.label }}</span>
                    <span class="accordion-icon">‚ñº</span>
                  </summary>
                  <div class="accordion-content">
                    {% if cat.description %}
                      <p>{{ cat.description }}</p>
                    {% else %}
                      <p class="muted">See community resources for detailed rules.</p>
                    {% endif %}
                    {% if cat.children and cat.children.size > 0 %}
                      <div class="mt-3">
                        <strong>Subcategories:</strong>
                        <ul class="mt-2">
                          {% for child in cat.children %}
                            <li>{{ child.label }}{% if child.description %} - {{ child.description }}{% endif %}</li>
                          {% endfor %}
                        </ul>
                      </div>
                    {% endif %}
                  </div>
                </details>
              {% endfor %}
            </div>
          </div>
        </details>
      </div>
      {% endif %}

      <!-- =========================================================
           Community Challenges
           ========================================================= -->
      {% if game.community_challenges and game.community_challenges.size > 0 %}
      <div class="rules-section mt-4">
        <details class="accordion-item accordion-item--section">
          <summary class="accordion-header accordion-header--section">
            <span class="accordion-title">üåü Community Challenges</span>
            <span class="accordion-icon">‚ñº</span>
          </summary>
          <div class="accordion-content">
            <p class="muted mb-3">Game-specific challenges from the {{ game.name }} community:</p>
            <div class="accordion">
              {% for cc in game.community_challenges %}
                <details class="accordion-item">
                  <summary class="accordion-header">
                    <span class="accordion-title">{{ cc.label }}</span>
                    <span class="accordion-icon">‚ñº</span>
                  </summary>
                  <div class="accordion-content">
                    {% if cc.description %}
                      <p>{{ cc.description }}</p>
                    {% else %}
                      <p class="muted">See resources for detailed rules.</p>
                    {% endif %}
                  </div>
                </details>
              {% endfor %}
            </div>
          </div>
        </details>
      </div>
      {% endif %}

      <!-- =========================================================
           Glitch Categories
           ========================================================= -->
      {% if game.glitches_data and game.glitches_data.size > 0 %}
      <div class="rules-section mt-4">
        <details class="accordion-item accordion-item--section">
          <summary class="accordion-header accordion-header--section">
            <span class="accordion-title">üîß Glitch Categories</span>
            <span class="accordion-icon">‚ñº</span>
          </summary>
          <div class="accordion-content">
            <p class="muted mb-3">Glitch rule categories for {{ game.name }} runs:</p>
            <div class="accordion">
              {% for glitch in game.glitches_data %}
                <details class="accordion-item">
                  <summary class="accordion-header">
                    <span class="accordion-title">{{ glitch.label }}</span>
                    <span class="accordion-icon">‚ñº</span>
                  </summary>
                  <div class="accordion-content">
                    {% if glitch.description %}
                      <p>{{ glitch.description }}</p>
                    {% endif %}
                    {% if glitch.allowed and glitch.allowed.size > 0 %}
                      <p class="mt-2">
                        <span class="rules-label rules-list--allowed">‚úì Allowed:</span>
                        {{ glitch.allowed | join: ", " }}
                      </p>
                    {% endif %}
                    {% if glitch.banned and glitch.banned.size > 0 %}
                      <p class="mt-2">
                        <span class="rules-label rules-list--banned">‚úó Banned:</span>
                        {{ glitch.banned | join: ", " }}
                      </p>
                    {% endif %}
                    {% if glitch.notes %}
                      <p class="mt-2 muted"><em>{{ glitch.notes }}</em></p>
                    {% endif %}
                  </div>
                </details>
              {% endfor %}
            </div>
          </div>
        </details>
      </div>
      {% endif %}

      <!-- =========================================================
           Standard Challenge Types
           ========================================================= -->
      {% if game.challenges and game.challenges.size > 0 %}
      <div class="rules-section mt-4">
        <details class="accordion-item accordion-item--section">
          <summary class="accordion-header accordion-header--section">
            <span class="accordion-title">üéØ Standard Challenge Types</span>
            <span class="accordion-icon">‚ñº</span>
          </summary>
          <div class="accordion-content">
            <p class="muted mb-3">Standard challenge types tracked for {{ game.name }}:</p>
            <div class="accordion">
              {% for ch_id in game.challenges %}
                {% assign ch_meta = site.data.challenges[ch_id] %}
                <details class="accordion-item">
                  <summary class="accordion-header">
                    <span class="accordion-title">{{ ch_meta.label | default: ch_id }}</span>
                    <span class="accordion-icon">‚ñº</span>
                  </summary>
                  <div class="accordion-content">
                    {% if ch_meta.description %}
                      <p>{{ ch_meta.description }}</p>
                    {% else %}
                      {% case ch_id %}
                        {% when 'hitless' %}
                          <p>Complete the run without taking any hits. Getting hit by any enemy attack, hazard, or environmental damage fails the challenge.</p>
                        {% when 'damageless' %}
                          <p>Complete the run without losing any health. Blocking or absorbing damage with shields/abilities may be allowed depending on game-specific rules.</p>
                        {% when 'deathless' %}
                          <p>Complete the run without dying. Any death (including intentional deaths) fails the challenge.</p>
                        {% when 'no-hit-no-damage' %}
                          <p>Complete the run without taking any hits AND without losing any health. The strictest damage-related challenge.</p>
                        {% when 'blindfolded' %}
                          <p>Complete the run without being able to see the screen. Audio cues and muscle memory only.</p>
                        {% else %}
                          <p class="muted">Standard challenge type. See community resources for detailed rules.</p>
                      {% endcase %}
                    {% endif %}
                  </div>
                </details>
              {% endfor %}
            </div>
          </div>
        </details>
      </div>
      {% endif %}

      <!-- =========================================================
           Optional Restrictions (Accordion style)
           ========================================================= -->
      {% if game.restrictions and game.restrictions.size > 0 %}
      <div class="rules-section mt-4">
        <details class="accordion-item accordion-item--section">
          <summary class="accordion-header accordion-header--section">
            <span class="accordion-title">‚õî Optional Restrictions</span>
            <span class="accordion-icon">‚ñº</span>
          </summary>
          <div class="accordion-content">
            <p class="muted mb-3">Additional restrictions runners can voluntarily apply to their runs:</p>
            <div class="accordion">
              {% for res in game.restrictions %}
                <details class="accordion-item">
                  <summary class="accordion-header">
                    <span class="accordion-title">{{ res }}</span>
                    <span class="accordion-icon">‚ñº</span>
                  </summary>
                  <div class="accordion-content">
                    <p class="muted">This restriction can be combined with any category or challenge type.</p>
                  </div>
                </details>
              {% endfor %}
            </div>
          </div>
        </details>
      </div>
      {% endif %}

    </section>
  </div>
</div>

<!-- Rule Builder JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const categorySelect = document.getElementById('rb-category');
  const challengeSelect = document.getElementById('rb-challenge');
  const glitchSelect = document.getElementById('rb-glitch');
  const restrictionsContainer = document.getElementById('rb-restrictions');
  const resultDiv = document.getElementById('rb-result');
  const validationDiv = document.getElementById('rb-validation');
  const warningText = document.getElementById('rb-warning-text');

  // Incompatible combinations - you can add more here
  const incompatibleRules = {
    // Format: "restriction": ["incompatible_category1", "incompatible_category2"]
    "No Monarch Wings": ["all-skills", "112-apb", "107-ab"],
    "No Spells": ["all-skills"],
    // Add more as needed
  };

  function updateRuleBuilder() {
    const category = categorySelect.options[categorySelect.selectedIndex];
    const challenge = challengeSelect.options[challengeSelect.selectedIndex];
    const glitch = glitchSelect.options[glitchSelect.selectedIndex];
    const restrictions = Array.from(restrictionsContainer.querySelectorAll('input:checked'));

    let html = '';
    let hasContent = false;
    let warnings = [];

    // Category
    if (category && category.value) {
      html += '<div class="rb-section"><strong>üìÅ Category:</strong> ' + category.text.trim() + '</div>';
      if (category.dataset.rules) {
        html += '<p class="rb-detail">' + category.dataset.rules + '</p>';
      }
      hasContent = true;
    }

    // Challenge
    if (challenge && challenge.value) {
      html += '<div class="rb-section mt-2"><strong>üéØ Challenge:</strong> ' + challenge.text + '</div>';
      if (challenge.dataset.rules) {
        html += '<p class="rb-detail">' + challenge.dataset.rules + '</p>';
      }
      hasContent = true;
    }

    // Glitch rules
    if (glitch && glitch.value) {
      html += '<div class="rb-section mt-2"><strong>üîß Glitch Rules:</strong> ' + glitch.text + '</div>';
      if (glitch.dataset.rules) {
        html += '<p class="rb-detail">' + glitch.dataset.rules + '</p>';
      }
      if (glitch.dataset.allowed) {
        html += '<p class="rb-detail rules-list--allowed">‚úì Allowed: ' + glitch.dataset.allowed + '</p>';
      }
      if (glitch.dataset.banned) {
        html += '<p class="rb-detail rules-list--banned">‚úó Banned: ' + glitch.dataset.banned + '</p>';
      }
      hasContent = true;
    }

    // Restrictions
    if (restrictions.length > 0) {
      html += '<div class="rb-section mt-2"><strong>‚õî Restrictions:</strong></div>';
      html += '<ul class="rb-list">';
      restrictions.forEach(function(r) {
        html += '<li>' + r.value + '</li>';
        
        // Check for incompatibilities
        if (incompatibleRules[r.value] && category && category.value) {
          incompatibleRules[r.value].forEach(function(incompatCat) {
            if (category.value === incompatCat || category.value.startsWith(incompatCat + '/')) {
              warnings.push('"' + r.value + '" may be incompatible with "' + category.text.trim() + '"');
            }
          });
        }
      });
      html += '</ul>';
      hasContent = true;
    }

    // Update result
    if (hasContent) {
      resultDiv.innerHTML = html;
    } else {
      resultDiv.innerHTML = '<p class="muted">Select options above to build your ruleset.</p>';
    }

    // Show warnings
    if (warnings.length > 0) {
      warningText.textContent = warnings.join('. ');
      validationDiv.style.display = 'block';
    } else {
      validationDiv.style.display = 'none';
    }
  }

  // Add event listeners
  if (categorySelect) categorySelect.addEventListener('change', updateRuleBuilder);
  if (challengeSelect) challengeSelect.addEventListener('change', updateRuleBuilder);
  if (glitchSelect) glitchSelect.addEventListener('change', updateRuleBuilder);
  if (restrictionsContainer) {
    restrictionsContainer.addEventListener('change', updateRuleBuilder);
  }
});
</script>
