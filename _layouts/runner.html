---
layout: default
---

<!-- ============================================================
     Runner Tabs (Profile / Runs / Other)
     ============================================================ -->
<nav class="runner-tabs" id="runner-tabs">
  <button class="tab active" data-tab="profile" type="button">Profile</button>
  <button class="tab" data-tab="runs" type="button">Completed Runs</button>
  <button class="tab" data-tab="other" type="button">Something Else</button>
</nav>

<!-- ============================================================
     Back Link (kept in page-width for alignment)
     ============================================================ -->
<div class="page-width">
  <p class="muted">
    <a href="{{ '/runners/' | relative_url }}">← Runners</a>
  </p>
</div>

<!-- ============================================================
     Runner Avatar Source (fallback if cover is missing)
     ============================================================ -->
{% assign avatar = page.cover | default: "/assets/img/site/default-runner.png" %}

<!-- ============================================================
     Runner Header Row (Avatar left, Socials right)
     ============================================================ -->
<div class="page-width">
  <section class="runner-top">
    <div class="runner-left">
      <div
        class="runner-avatar"
        style="background-image: url('{{ avatar | relative_url }}');"
        aria-label="{{ page.name }} profile picture"
      ></div>

      <div class="runner-name">
        <h1>{{ page.name }}</h1>
        {% if page.status %}
          <p class="muted" style="margin: 0.25rem 0 0 0;">{{ page.status }}</p>
        {% endif %}
      </div>
    </div>

    <div class="runner-right">
      <div class="runner-links">
        {% if page.twitch %}
          <a class="runner-link" href="{{ page.twitch }}" target="_blank" rel="noreferrer">
            <span>Twitch</span>
          </a>
        {% endif %}

        {% if page.youtube %}
          <a class="runner-link" href="{{ page.youtube }}" target="_blank" rel="noreferrer">
            <span>YouTube</span>
          </a>
        {% endif %}

        {% if page.discord %}
          <a class="runner-link" href="{{ page.discord }}" target="_blank" rel="noreferrer">
            <span>Discord</span>
          </a>
        {% endif %}

        {% if page.twitter %}
          <a class="runner-link" href="{{ page.twitter }}" target="_blank" rel="noreferrer">
            <span>Twitter/X</span>
          </a>
        {% endif %}
      </div>
    </div>
  </section>
</div>

<div class="page-width">
  <!-- ==========================================================
       PROFILE PANEL
       ========================================================== -->
  <section class="tab-panel active" data-panel="profile">
    {% if content and content != "" %}
      <div class="card">{{ content }}</div>
    {% endif %}

    {% if page.games and page.games.size > 0 %}
      <div class="card">
        <h2>Games</h2>

        <div class="grid">
          {% for gid in page.games %}
            {% assign g = site.games | where: "game_id", gid | first %}
            {% if g %}
              <a href="{{ g.url | relative_url }}" class="game-card">
                <div class="game-card__bg" style="background-image: url('{{ g.cover | relative_url }}');"></div>
                <div class="game-card__overlay">
                  <div class="game-card__title">{{ g.name }}</div>
                </div>
              </a>
            {% else %}
              <div class="card">{{ gid }}</div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}
  </section>

  <!-- ==========================================================
       RUNS PANEL
       ========================================================== -->
  <section class="tab-panel" data-panel="runs">
    {% assign all_runs = site.data.runs | default: empty %}

    {%- comment -%}
    Match runs by runner_id (required).
    Runner page front matter should include:
      runner_id: gary-asher
    And each run in _data/runs.yml should include:
      runner_id: gary-asher
    {%- endcomment -%}

    {% assign rid = page.runner_id | default: "" | strip | downcase %}
    {% assign runs = "" | split: "" %}

    {% for r in all_runs %}
      {% assign r_rid = r.runner_id | default: "" | strip | downcase %}
      {% if r_rid == rid %}
        {% assign runs = runs | push: r %}
      {% endif %}
    {% endfor %}

    {% assign runs = runs | sort: "date_completed" | reverse %}

    {% if runs and runs.size > 0 %}
      <div class="card">
        <h2>Completed Runs</h2>
        <p class="muted">{{ runs.size }} run{% if runs.size != 1 %}s{% endif %}</p>
      </div>

      <div id="runner-runs" class="list-paged" data-page-size="25">
        <div class="list-items">
          {% for r in runs %}
            {% assign g = site.games | where: "game_id", r.game_id | first %}
            {% assign r_video = r.video | default: r.video_link | default: "" %}
            {% assign r_date  = r.date_completed | default: r.date | default: "" %}
            {% assign r_time  = r.time | default: "" %}

            <article class="card list-item">
              <strong>
                {% if g %}
                  <a href="{{ g.url | relative_url }}">{{ g.name }}</a>
                {% else %}
                  {{ r.game_id }}
                {% endif %}
              </strong>
              {% if r.category and r.category != "" %}
                <span class="muted"> · {{ r.category }}</span>
              {% endif %}

              <div class="muted" style="margin-top: 0.35rem;">
                {% assign ch_id = r.challenge_id | default: "" | strip %}
                {% if ch_id != "" %}
                 {% assign chmeta = site.data.challenges[ch_id] %}
                 {% assign ch_label = ch_id %}
                 {% if chmeta and chmeta.label %}
                   {% assign ch_label = chmeta.label %}
                 {% endif %}
                
                 {% assign ch_label = ch_label | strip %}
                 {% if ch_label != "" and ch_label != "—" %}
                   <span class="tag">{{ ch_label }}</span>
                 {% endif %}
                {% endif %}

                {% if r_time and r_time != "" %}
                  <span class="muted"> · {{ r_time }}</span>
                {% endif %}

                {% if r_date and r_date != "" %}
                  <span class="muted"> · <time datetime="{{ r_date }}">{{ r_date }}</time></span>
                {% endif %}

                {% if r_video and r_video != "" %}
                  <span class="muted"> · <a href="{{ r_video }}" target="_blank" rel="noopener">Video</a></span>
                {% endif %}

                {% if r.verified_by and r.verified_by != "" %}
                  <span class="muted"> · Verified by {{ r.verified_by }}</span>
                {% endif %}
              </div>

              {% if r.restrictions and r.restrictions.size > 0 %}
                <div style="margin-top: 0.5rem;">
                  {% for x in r.restrictions %}
                    <span class="tag">{{ x }}</span>
                  {% endfor %}
                </div>
              {% endif %}
            </article>
          {% endfor %}
        </div>

        <div class="list-controls list-controls--bottom">
          <div class="muted" data-status></div>

          <div class="pager">
            <button type="button" class="btn" data-prev>Prev</button>
            <span class="muted" data-page-label></span>
            <div class="page-numbers" data-pages></div>
            <button type="button" class="btn" data-next>Next</button>
          </div>
        </div>
      </div>
    {% else %}
      <div class="card">
        <p class="muted">No runs have been added yet.</p>
      </div>
    {% endif %}
  </section>

  <!-- ==========================================================
       OTHER PANEL
       ========================================================== -->
  <section class="tab-panel" data-panel="other">
    <div class="card">
      <h2>Something Else</h2>
      <p class="muted">Placeholder tab.</p>
    </div>
  </section>
</div>

<!-- ============================================================
     Tabs Script (switch panels without changing pages)
     ============================================================ -->
<script>
(function () {
  const tabs = Array.from(document.querySelectorAll(".runner-tabs .tab"));
  const panels = Array.from(document.querySelectorAll(".tab-panel[data-panel]"));

  function setActive(name) {
    for (const t of tabs) t.classList.toggle("active", t.dataset.tab === name);
    for (const p of panels) p.classList.toggle("active", p.dataset.panel === name);
  }

  tabs.forEach(t => {
    t.addEventListener("click", () => setActive(t.dataset.tab));
  });
})();
</script>
