---
layout: default
---

<nav class="runner-tabs" id="runner-tabs">
  <button class="tab active" data-tab="profile" type="button">Profile</button>
  <button class="tab" data-tab="runs" type="button">Completed Runs</button>
  <button class="tab" data-tab="other" type="button">Something Else</button>
</nav>

<div class="page-width">
  <p class="muted">
    <a href="{{ '/runners/' | relative_url }}">← Runners</a>
  </p>
</div>

{% assign avatar = page.cover | default: "/assets/img/site/default-runner.png" %}

<div class="page-width">
  <section class="runner-top">
    <div class="runner-left">
      <div
        class="runner-avatar"
        style="background-image: url('{{ avatar | relative_url }}');"
        aria-label="{{ page.name }} profile picture"
      ></div>

      <div class="runner-name">
        <h1>{{ page.name }}</h1>
        {% if page.status %}
          <p class="muted" style="margin: 0.25rem 0 0 0;">{{ page.status }}</p>
        {% endif %}
      </div>
    </div>

    <div class="runner-right">
      <div class="runner-links">
        {% if page.twitch %}
          <a class="runner-link" href="{{ page.twitch }}" target="_blank" rel="noreferrer">
            <span>Twitch</span>
          </a>
        {% endif %}

        {% if page.youtube %}
          <a class="runner-link" href="{{ page.youtube }}" target="_blank" rel="noreferrer">
            <span>YouTube</span>
          </a>
        {% endif %}

        {% if page.discord %}
          <a class="runner-link" href="{{ page.discord }}" target="_blank" rel="noreferrer">
            <span>Discord</span>
          </a>
        {% endif %}

        {% if page.twitter %}
          <a class="runner-link" href="{{ page.twitter }}" target="_blank" rel="noreferrer">
            <span>Twitter/X</span>
          </a>
        {% endif %}
      </div>
    </div>
  </section>
</div>

<div class="page-width">
  <section class="tab-panel active" data-panel="profile">
    {% if content and content != "" %}
      <div class="card">{{ content }}</div>
    {% endif %}

    {% if page.games and page.games.size > 0 %}
      <div class="card">
        <h2>Games</h2>
        <div class="grid">
          {% for gid in page.games %}
            {% assign g = site.games | where: "game_id", gid | first %}
            {% if g %}
              <a href="{{ g.url | relative_url }}" class="game-card">
                <div class="game-card__bg" style="background-image: url('{{ g.cover | relative_url }}');"></div>
                <div class="game-card__overlay">
                  <div class="game-card__title">{{ g.name }}</div>
                </div>
              </a>
            {% else %}
              <div class="card">{{ gid }}</div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}
  </section>

  <section class="tab-panel" data-panel="runs">
    {% assign all_runs = site.data.runs | default: empty %}
    {% assign rid = page.runner_id | default: "" | strip | downcase %}
    {% assign runs = "" | split: "" %}

    {% for r in all_runs %}
      {% assign r_rid = r.runner_id | default: "" | strip | downcase %}
      {% if r_rid == rid %}
        {% assign runs = runs | push: r %}
      {% endif %}
    {% endfor %}

    {% assign runs = runs | sort: "date_completed" | reverse %}

    {% if runs and runs.size > 0 %}
      <div class="card">
        <h2>Completed Runs</h2>
        <p class="muted">{{ runs.size }} run{% if runs.size != 1 %}s{% endif %}</p>
      </div>

      {% for r in runs %}
        {% assign g = site.games | where: "game_id", r.game_id | first %}
        {% assign r_video = r.video_link | default: r.video | default: "" %}
        {% assign r_date  = r.date_completed | default: r.date | default: "" %}
        {% assign r_time  = r.time | default: "" %}

        <article class="card">
          <strong>
            {% if g %}
              <a href="{{ g.url | relative_url }}">{{ g.name }}</a>
            {% else %}
              {{ r.game_id }}
            {% endif %}
          </strong>

          {% if r.category and r.category != "" %}
            <span class="muted"> · {{ r.category }}</span>
          {% endif %}

          <div class="muted" style="margin-top: 0.35rem;">
            {% if r.challenge_id %}
              {% assign chmeta = site.data.challenges[r.challenge_id] %}
              <span class="tag">{{ chmeta.label | default: r.challenge_id }}</span>
            {% endif %}

            {% if r_time and r_time != "" %}
              <span class="muted"> · {{ r_time }}</span>
            {% endif %}

            {% if r_date and r_date != "" %}
              <span class="muted"> · <time datetime="{{ r_date }}">{{ r_date }}</time></span>
            {% endif %}

            {% if r_video and r_video != "" %}
              <span class="muted"> · <a href="{{ r_video }}" target="_blank" rel="noopener">Video</a></span>
            {% endif %}
          </div>

          {% if r.restrictions and r.restrictions.size > 0 %}
            <div style="margin-top: 0.5rem;">
              {% for x in r.restrictions %}
                <span class="tag">{{ x }}</span>
              {% endfor %}
            </div>
          {% endif %}
        </article>
      {% endfor %}
    {% else %}
      <div class="card">
        <p class="muted">No runs have been added yet.</p>
      </div>
    {% endif %}
  </section>

  <section class="tab-panel" data-panel="other">
    <div class="card">
      <h2>Something Else</h2>
      <p class="muted">Placeholder tab.</p>
    </div>
  </section>
</div>

<script>
(function () {
  const tabs = Array.from(document.querySelectorAll("#runner-tabs .tab"));
  const panels = Array.from(document.querySelectorAll(".tab-panel[data-panel]"));

  function setActive(name) {
    for (const t of tabs) t.classList.toggle("active", t.dataset.tab === name);
    for (const p of panels) p.classList.toggle("active", p.dataset.panel === name);
  }

  tabs.forEach(t => {
    t.addEventListener("click", () => setActive(t.dataset.tab));
  });
})();
</script>
