---
layout: default
---

{% include game-header-tabs.html game=page active="overview" %}

<!-- =========================================================
     Overview Tab - Clean with accordions
     
     ORDERING (per spec):
     1. Game Description (content)
     2. General Rules (if present)
     3. Standard Challenge Types
     4. Optional Restrictions
     5. Glitch Categories
     ========================================================= -->
<div class="page-width">
  <div class="game-shell">

    <section class="tab-panel active" data-panel="overview">
      
      <!-- Game description content from markdown -->
      {% assign stripped_content = content | strip %}
      {% if stripped_content != "" %}
        <div class="card">
          {{ content }}
        </div>
      {% endif %}

      <!-- =========================================================
           1. General Rules (placeholder - shown if game has general_rules)
           ========================================================= -->
      {% if page.general_rules and page.general_rules.size > 0 %}
      <div class="card card--compact mt-4" data-section-order="1">
        <h2 class="mb-2">General Rules</h2>
        <p class="muted mb-3">Core rules that apply to all runs:</p>
        <ul>
          {% for rule in page.general_rules %}
            <li>{{ rule }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <!-- =========================================================
           2. Standard Challenge Types
           ========================================================= -->
      {% if page.challenges_data and page.challenges_data.size > 0 %}
      <div class="card card--compact mt-4" data-section-order="2">
        <h2 class="mb-2">Standard Challenges:</h2>
        <div class="accordion">
          {% for ch in page.challenges_data %}
            <details class="accordion-item">
              <summary class="accordion-header">
                <span class="accordion-title">{{ ch.label }}</span>
                <span class="accordion-icon">▼</span>
              </summary>
              <div class="accordion-content">
                {% if ch.description %}
                  <p>{{ ch.description }}</p>
                {% else %}
                  <p class="muted">See Rules tab for detailed definition.</p>
                {% endif %}
              </div>
            </details>
          {% endfor %}
        </div>
      </div>
      {% elsif page.challenges and page.challenges.size > 0 %}
      <!-- Fallback to old format if challenges_data not present -->
      <div class="card card--compact mt-4" data-section-order="2">
        <h2 class="mb-2">Standard Challenges:</h2>
        <div class="accordion">
          {% for ch_id in page.challenges %}
            {% assign ch_meta = site.data.challenges[ch_id] %}
            <details class="accordion-item">
              <summary class="accordion-header">
                <span class="accordion-title">{{ ch_meta.label | default: ch_id }}</span>
                <span class="accordion-icon">▼</span>
              </summary>
              <div class="accordion-content">
                {% if ch_meta.description %}
                  <p>{{ ch_meta.description }}</p>
                {% else %}
                  <p class="muted">See Rules tab for detailed definition.</p>
                {% endif %}
              </div>
            </details>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- =========================================================
           3. Optional Restrictions
           ========================================================= -->
      {% if page.restrictions_data and page.restrictions_data.size > 0 %}
      <div class="card card--compact mt-4" data-section-order="3">
        <h2 class="mb-2">Optional Restrictions:</h2>
        <div class="accordion">
          {% for res in page.restrictions_data %}
          <details class="accordion-item">
            <summary class="accordion-header">
              <span class="accordion-title">{{ res.label }}</span>
              <span class="accordion-icon">▼</span>
            </summary>
            <div class="accordion-content">
              {% if res.description %}
                <p>{{ res.description }}</p>
              {% else %}
                <p class="muted">Can be combined with any category.</p>
              {% endif %}
              {% if res.incompatible_with and res.incompatible_with.size > 0 %}
                <p class="mt-2 muted"><em>⚠️ Cannot be combined with: {{ res.incompatible_with | join: ", " }}</em></p>
              {% endif %}
            </div>
          </details>
          {% endfor %}
        </div>
      </div>
      {% elsif page.restrictions and page.restrictions.size > 0 %}
      <!-- Fallback to old format -->
      <div class="card card--compact mt-4" data-section-order="3">
        <h2 class="mb-2">Optional Restrictions</h2>
        <div class="accordion">
          {% for res in page.restrictions %}
          <details class="accordion-item">
            <summary class="accordion-header">
              <span class="accordion-title">{{ res }}</span>
              <span class="accordion-icon">▼</span>
            </summary>
            <div class="accordion-content">
              <p class="muted">Can be combined with any category.</p>
            </div>
          </details>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- =========================================================
           4. Glitch Categories
           ========================================================= -->
      {% unless page.glitches_relevant == false %}
        {% if page.glitches_data and page.glitches_data.size > 0 %}
        <div class="card card--compact mt-4" data-section-order="4">
          <h2 class="mb-2">Glitch Categories:</h2>
          <div class="accordion">
            {% for gl in page.glitches_data %}
            <details class="accordion-item">
              <summary class="accordion-header">
                <span class="accordion-title">{{ gl.label }}</span>
                <span class="accordion-icon">▼</span>
              </summary>
              <div class="accordion-content">
                {% if gl.description %}
                  <p>{{ gl.description }}</p>
                {% else %}
                  <p class="muted">See Rules tab for detailed definition.</p>
                {% endif %}
                {% if gl.allowed and gl.allowed.size > 0 %}
                  <p class="mt-2"><strong>Allowed:</strong> {{ gl.allowed | join: ", " }}</p>
                {% endif %}
                {% if gl.banned and gl.banned.size > 0 %}
                  <p class="mt-2"><strong>Banned:</strong> {{ gl.banned | join: ", " }}</p>
                {% endif %}
                {% if gl.notes %}
                  <p class="mt-2 muted"><em>{{ gl.notes }}</em></p>
                {% endif %}
              </div>
            </details>
            {% endfor %}
          </div>
        </div>
        {% endif %}
      {% else %}
        <!-- Glitches not relevant for this game - show notice -->
        <div class="card card--compact mt-4" data-section-order="4">
          <h2 class="mb-2">Glitch Categories</h2>
          <p class="muted">This game does not distinguish between glitch categories.</p>
        </div>
      {% endunless %}

      <!-- Note: Community Challenges are NOT shown on Overview page per spec -->
      <!-- They appear only on the Rules page -->

    </section>

  </div>
</div>
