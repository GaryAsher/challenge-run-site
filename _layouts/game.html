---
layout: default
---

<!-- =========================================================
     Back link to the Games index
     ========================================================= -->
<div class="page-width">
  <p class="muted page-back">
    <a href="{{ '/games/' | relative_url }}">‚Üê Games</a>
  </p>
</div>

<!-- =========================================================
     Game hero section (uses cover image if provided)
     ========================================================= -->
{% if page.cover %}
  <section
    class="game-hero"
    style="
      background-image: url('{{ page.cover | relative_url }}');
      background-position: {{ page.cover_position | default: 'center' }};
    "
  >
    <!-- Dark gradient overlay on top of the cover -->
    <div class="game-hero__overlay">
      <div class="game-hero__content">
        <h1>{{ page.name }}</h1>

        {% if page.status %}
          <p class="muted">{{ page.status }}</p>
        {% endif %}

        {% if page.tags and page.tags.size > 0 %}
          <div class="game-tags">
            {% for tag in page.tags %}
              {% assign meta = site.data.tags[tag] %}
              <span class="tag">{{ meta.label | default: tag }}</span>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </section>

{% else %}
  <!-- =========================================================
       Fallback layout if no cover image exists
       ========================================================= -->
  <div class="container">
    <h1>{{ page.name }}</h1>

    {% if page.status %}
      <p class="muted">{{ page.status }}</p>
    {% endif %}

    {% if page.tags and page.tags.size > 0 %}
      <div class="game-tags">
        {% for tag in page.tags %}
          {% assign meta = site.data.tags[tag] %}
          <span class="tag">{{ meta.label | default: tag }}</span>
        {% endfor %}
      </div>
    {% endif %}
  </div>
{% endif %}

<!-- =========================================================
     Game Tabs - Main
     ========================================================= -->
{% assign tabs_cfg = page.tabs | default: {} %}
{% assign show_challenges = tabs_cfg.challenges | default: true %}
{% assign show_categories = tabs_cfg.categories | default: true %}
{% assign show_runs       = tabs_cfg.runs       | default: true %}
{% assign show_resources  = tabs_cfg.resources  | default: true %}
{% assign show_guides     = tabs_cfg.guides     | default: true %}
{% assign show_forums     = tabs_cfg.forums     | default: true %}
{% assign show_history    = tabs_cfg.history    | default: true %}

{% assign any_tabs = show_challenges or show_categories or show_runs or show_resources or show_guides or show_forums or show_history %}

{% if any_tabs %}
  <nav class="runner-tabs game-tabs" id="game-tabs">
    {% if show_challenges %}
      <button class="tab active" type="button" data-tab="challenges">Challenges</button>
    {% endif %}

    {% if show_categories %}
      <button class="tab" type="button" data-tab="categories">Categories</button>
    {% endif %}

    {% if show_runs %}
      <a class="tab" href="{{ page.url | relative_url | append: 'completed-runs/' }}">Completed Runs</a>
    {% endif %}

    {% if show_resources %}
      <button class="tab" type="button" data-tab="resources">Resources</button>
    {% endif %}

    {% if show_guides %}
      <button class="tab" type="button" data-tab="guides">Guides</button>
    {% endif %}

    {% if show_forums %}
      <button class="tab" type="button" data-tab="forums">Forums</button>
    {% endif %}

    {% if show_history %}
      <button class="tab" type="button" data-tab="history">History</button>
    {% endif %}
  </nav>

  <div class="page-width">

    <!-- =======================================================
         CHALLENGES
         ======================================================= -->
    {% if show_challenges %}
      <section class="tab-panel active" data-panel="challenges">
        <div class="card">
          <h2>Challenges</h2>

          {% if page.challenges and page.challenges.size > 0 %}
            <div class="game-tags">
              {% for challenge in page.challenges %}
                {% assign meta = site.data.challenges[challenge] %}
                <span class="tag">{{ meta.label | default: challenge }}</span>
              {% endfor %}
            </div>
          {% else %}
            <p class="muted">No challenges listed yet.</p>
          {% endif %}
        </div>

        {% if content and content != "" %}
          <div class="card">
            {{ content }}
          </div>
        {% endif %}
      </section>
    {% endif %}

    <!-- =======================================================
         CATEGORIES
         ======================================================= -->
    {% if show_categories %}
      <section class="tab-panel" data-panel="categories">
        <div class="card">
          <h2>Categories</h2>

          {% if page.categories and page.categories.size > 0 %}
            <ul class="list">
              {% for c in page.categories %}
                <li>{{ c }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="muted">No categories listed yet.</p>
          {% endif %}

          {% if page.subcategories and page.subcategories.size > 0 %}
            <hr style="border: 0; border-top: 1px solid var(--border); margin: 1rem 0;">
            <h3>Subcategories</h3>
            <ul class="list">
              {% for s in page.subcategories %}
                <li>{{ s }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      </section>
    {% endif %}

    <!-- =======================================================
         RESOURCES
         ======================================================= -->
    {% if show_resources %}
      <section class="tab-panel" data-panel="resources">
        <div class="card">
          <h2>Resources</h2>
          <p class="muted">Coming soon.</p>
        </div>
      </section>
    {% endif %}

    <!-- =======================================================
         GUIDES
         ======================================================= -->
    {% if show_guides %}
      <section class="tab-panel" data-panel="guides">
        <div class="card">
          <h2>Guides</h2>
          <p class="muted">Coming soon.</p>
        </div>
      </section>
    {% endif %}

    <!-- =======================================================
         FORUMS
         ======================================================= -->
    {% if show_forums %}
      <section class="tab-panel" data-panel="forums">
        <div class="card">
          <h2>Forums</h2>
          <p class="muted">Coming soon.</p>
        </div>
      </section>
    {% endif %}

    <!-- =======================================================
         HISTORY
         ======================================================= -->
    {% if show_history %}
      <section class="tab-panel" data-panel="history">
        <div class="card">
          <h2>History</h2>

          {% if page.history %}
            {{ page.history | markdownify }}
          {% else %}
            <p class="muted">No history recorded yet.</p>
          {% endif %}
        </div>
      </section>
    {% endif %}

  </div>
{% endif %}

<!-- =========================================================
     Tabs Script
     ========================================================= -->
<script>
(function () {
  const root = document.getElementById("game-tabs");
  if (!root) return;

  const tabs = Array.from(root.querySelectorAll('[data-tab].tab'));
  const wrap = root.nextElementSibling;
  const panels = wrap ? Array.from(wrap.querySelectorAll(".tab-panel")) : [];

  function setActive(name) {
    const hasPanel = panels.some(p => p.dataset.panel === name);
    if (!hasPanel) return;

    for (const t of tabs) t.classList.toggle("active", t.dataset.tab === name);
    for (const p of panels) p.classList.toggle("active", p.dataset.panel === name);
  }

  tabs.forEach(t => {
    t.addEventListener("click", (e) => {
      e.preventDefault();
      setActive(t.dataset.tab);
      history.replaceState(null, "", "#" + t.dataset.tab);
    });
  });

  const hash = location.hash.slice(1);

  if (hash === "runs") {
     location.replace("{{ page.url | relative_url | append: 'completed-runs/' }}");
     return;
  }
       
  const valid = tabs.find(t => t.dataset.tab === hash);
  const start = valid ? hash : null;

  if (start) setActive(start);
})();
</script>
