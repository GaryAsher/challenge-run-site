---
layout: default
---

{% include game-header-tabs.html game=page active="overview" %}

<!-- =========================================================
     Tab panels
     ========================================================= -->
<div class="page-width">
  <div class="game-shell">

    <!-- Overview -->
    <section class="tab-panel active" data-panel="overview" id="overview">
      {% if content %}
        <div class="card">
          {{ content }}
        </div>
      {% endif %}
    </section>

    <!-- Categories -->
    <section class="tab-panel" data-panel="categories" id="categories">
      <div class="card">
        <h2>Categories</h2>

        {% assign runs_for_game = site.runs | where: "game_id", page.game_id %}
        {% assign cats_raw = runs_for_game | map: "category" | uniq | sort %}

        {% if cats_raw and cats_raw.size > 0 %}
          <div class="tag-picker" style="margin-top: 0.75rem;">
            <div class="tag-picked">
              {% for cat in cats_raw %}
                {% if cat and cat != "" %}
                  {% assign slug = cat | slugify %}
                  <a class="tag-chip" href="{{ page.url | relative_url }}categories/{{ slug }}/">
                    {{ cat }}
                  </a>
                {% endif %}
              {% endfor %}
            </div>
          </div>
        {% else %}
          <p class="muted">No categories found yet.</p>
        {% endif %}
      </div>
    </section>

  </div>
</div>

<!-- =========================================================
     Hash-based panel switcher + tab active sync
     - default: Overview
     - #categories: Categories
     ========================================================= -->
<script>
(function () {
  const panels = Array.from(document.querySelectorAll(".tab-panel[data-panel]"));
  if (!panels.length) return;

  const tabsRoot = document.getElementById("game-tabs");
  const tabs = tabsRoot ? Array.from(tabsRoot.querySelectorAll(".tab[data-tab]")) : [];

  function setActive(name) {
    panels.forEach(p => p.classList.toggle("active", p.dataset.panel === name));

    if (tabs.length) {
      tabs.forEach(t => t.classList.toggle("active", (t.dataset.tab || "") === name));
    }
  }

  function syncFromHash() {
    const h = (window.location.hash || "").replace("#", "").toLowerCase();
    if (h === "categories") setActive("categories");
    else setActive("overview");
  }

  window.addEventListener("hashchange", syncFromHash);
  syncFromHash();
})();
</script>
