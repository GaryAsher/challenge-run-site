<footer class="site-footer">
  <div class="footer-content">
    <p class="muted">
      Â© 2025â€“{{ "now" | date: "%Y" }} Challenge Run Community. All rights reserved.
    </p>

    <div class="theme-picker" id="theme-picker">
      <span class="muted">Theme:</span>
      <button type="button" class="theme-btn" data-theme="" title="Green (default)">ðŸŸ¢</button>
      <button type="button" class="theme-btn" data-theme="pink" title="Pink">ðŸ©·</button>
      <button type="button" class="theme-btn" data-theme="blue" title="Blue">ðŸ”µ</button>
      <button type="button" class="theme-btn" data-theme="purple" title="Purple">ðŸŸ£</button>
      <button type="button" class="theme-btn" data-theme="red" title="Red">ðŸ”´</button>
    </div>
  </div>
</footer>

<script>
(function() {
  var currentTheme = '';
  try {
    currentTheme = localStorage.getItem('crc_theme') || '';
  } catch(e) {}

  // Mark active button on load
  document.querySelectorAll('.theme-btn').forEach(function(btn) {
    var btnTheme = btn.dataset.theme || '';
    if (btnTheme === currentTheme) {
      btn.classList.add('is-active');
    }

    btn.addEventListener('click', function() {
      var theme = btn.dataset.theme || '';
      
      // Update HTML attribute
      document.documentElement.setAttribute('data-theme', theme);
      
      // Update active states
      document.querySelectorAll('.theme-btn').forEach(function(b) {
        b.classList.remove('is-active');
      });
      btn.classList.add('is-active');
      
      // Save preference
      try {
        if (theme) localStorage.setItem('crc_theme', theme);
        else localStorage.removeItem('crc_theme');
      } catch(e) {}
    });
  });
})();
</script>
