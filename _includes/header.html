<header class="site-header">
  <a class="brand" href="{{ '/' | relative_url }}">CRC</a>

  <nav class="nav" aria-label="Primary navigation">
    <div class="nav-group">
      <a href="{{ '/games/' | relative_url }}">Games</a>
      <a href="{{ '/runners/' | relative_url }}">Runners</a>
    </div>

    <div class="nav-group">
      <div class="nav-dropdown">
        <button type="button" class="nav-dropdown__toggle" aria-expanded="false" aria-haspopup="true">
          More <span class="nav-dropdown__caret">‚ñæ</span>
        </button>
        <div class="nav-dropdown__menu" hidden>
          <a href="{{ '/rules/' | relative_url }}" class="nav-dropdown__item">Rules</a>
          <a href="{{ '/glossary/' | relative_url }}" class="nav-dropdown__item">Glossary</a>
          <a href="{{ '/support/' | relative_url }}" class="nav-dropdown__item">Support</a>
        </div>
      </div>
    </div>

    <div class="nav-search-wrap">
      <a href="{{ '/search/' | relative_url }}" class="nav-search-bar" aria-label="Search">
        <span class="nav-search-icon">üîç</span>
        <span class="nav-search-text">Search...</span>
      </a>
    </div>
  </nav>
</header>

<script>
// More dropdown toggle
(function() {
  document.querySelectorAll('.nav-dropdown__toggle').forEach(function(btn) {
    var menu = btn.nextElementSibling;
    
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      var isOpen = !menu.hidden;
      menu.hidden = isOpen;
      btn.setAttribute('aria-expanded', !isOpen);
    });
  });
  
  // Close on outside click
  document.addEventListener('click', function() {
    document.querySelectorAll('.nav-dropdown__menu').forEach(function(m) {
      m.hidden = true;
      m.previousElementSibling.setAttribute('aria-expanded', 'false');
    });
  });
  
  // Close on Escape
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      document.querySelectorAll('.nav-dropdown__menu').forEach(function(m) {
        m.hidden = true;
        m.previousElementSibling.setAttribute('aria-expanded', 'false');
      });
    }
  });
})();
</script>
